{"version":3,"sources":["Fuzzy-search.js"],"names":[],"mappings":"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","file":"fuzzy-search.js","sourcesContent":["export default class FuzzySearch {\n  constructor(list = [], keys = [], options = {}) {\n    if (list.length == 0) {\n      throw new Error('We need an array containing the search list');\n    }\n\n    this.list = list;\n    this.keys = keys;\n    this.options = FuzzySearch.extend({\n      caseSensitive: false,\n    }, options);\n  }\n\n  search(query = '') {\n    let results = [];\n\n    for (let x = 0; x < this.list.length; x++) {\n      let item = this.list[x];\n\n      if (this.keys.length == 0 && FuzzySearch.isMatch(item, query, this.options.caseSensitive)) {\n        results.push(item);\n      } else {\n        for (let y = 0; y < this.keys.length; y++) {\n          let propertyValues = FuzzySearch.getDescendantProperty(item, this.keys[y]);\n          let found = false;\n\n          for (let z = 0; z < propertyValues.length; z++) {\n            if (FuzzySearch.isMatch(propertyValues[z], query, this.options.caseSensitive)) {\n              results.push(item);\n              found = true;\n\n              break;\n            }\n          }\n\n          if (found) {\n            break;\n          }\n        }\n      }\n    }\n\n    return results;\n  }\n\n  static extend(...objects) {\n    let output = {};\n\n    for (let i = 1; i < objects.length; i++) {\n      let object = objects[i];\n\n      if (!object) {\n        continue;\n      }\n\n      for (let key in object) {\n        if (object.hasOwnProperty(key)) {\n          if (typeof object[key] === 'object') {\n            output[key] = FuzzySearch.deepExtend(output[key], object[key]);\n          } else {\n            output[key] = object[key];\n          }\n        }\n      }\n    }\n\n    return output;\n  }\n\n  static getDescendantProperty(object, path, list = []) {\n    let firstSegment;\n    let remaining;\n    let dotIndex;\n    let value;\n    let index;\n    let length;\n\n    if (!path) {\n      list.push(object)\n    } else {\n      dotIndex = path.indexOf('.')\n\n      if (dotIndex !== -1) {\n        firstSegment = path.slice(0, dotIndex)\n        remaining = path.slice(dotIndex + 1)\n      } else {\n        firstSegment = path\n      }\n\n      value = object[firstSegment]\n      if (value !== null && value !== undefined) {\n        if (!remaining && (typeof value === 'string' || typeof value === 'number')) {\n          list.push(value)\n        } else if (Object.prototype.toString.call(value) === '[object Array]') {\n          for (index = 0, length = value.length; index < length; index++) {\n            FuzzySearch.getDescendantProperty(value[index], remaining, list)\n          }\n        } else if (remaining) {\n          FuzzySearch.getDescendantProperty(value, remaining, list)\n        }\n      }\n    }\n\n    return list\n  }\n\n  static isMatch(item, query, caseSensitive) {\n    let regexp = new RegExp(query.split('').map(letter => letter.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\")).join('.*?'), !caseSensitive ? 'i' : '');\n\n    if (regexp.test(item)) {\n      return true;\n    }\n\n    return false;\n  }\n}\n"],"sourceRoot":"/source/"}